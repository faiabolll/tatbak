{% extends 'base.html' %}
{% load static %}
{% block content %}
<!-- Add form button -->
<div class='container'>
    <div class='section'>
        <div class='center-align'>
        <a class="waves-effect waves-light btn-large" id="mix_create_button" data-url="{% url 'tobaccos:mixes' %}">Add mix</a>
    </div>
</div>
<div class='divider'></div>
</div>

<!-- Form to add mix -->
<div style="display:none;" id="form_container">
    <div class="container">
        <div class="row">
            <div class="col s12 m6">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">                
                    <form method="post" id="mix_create_form"
                    data-url="{% url 'tobaccos:create_mix' %}">
                        {% csrf_token %}
                        <label for="id_structure" class="active">Structure:</label>
                        <input style="display:none;" type="text" name="structure" maxlength="1000" required="" id="id_structure" class="input">
                        <div class="chips input-field"></div>
                        {% for field in form %}
                            <label for="id_{{ field.name }}">{{field.label}}</label>
                                {{ field }}
                        {% endfor %}
                        <button type="button" class="save btn btn-default" id="mix_create_submit">Save</button>
                    </form>
                </div>
            </div>
            </div>
        </div>
        <div class='divider'></div>
    </div>
</div>

<!-- Mix cards-->
<div class="container" id="mixes_list">
{% if recent_mixes_list %}
    {% for mix in recent_mixes_list %} 
    <div class="row">
        <div class="col s12 m12 l12">
            
                
            <div class="card small hoverable" id="mix_card" data-id="{{ mix.id }}">
                <div class="card-image">
                    <img src="{% static 'images/pikcha.jpg' %}">
                    <span class="card-title"><b>{{ mix.author_name }} </b> {{ mix.structure }}</span>
                </div>
                <div class="card-content">
                    <p>{{ mix.description }}</p>
                </div>
                <div class="card-action">
                    <a href="#" class="right" id="delete_mix" data-id="{{ mix.id }}" data-url="{% url 'tobaccos:mixes' %}">Delete mix</a>  
                </div>
            </div>
            
        </div>  
    </div>
    {% endfor %}
{% else %}
    <h1 style="text-align:center;" id="no_mixes">No mixes:(</h1>
{% endif %}
</div>

{% endblock content %}
